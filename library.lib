MOV R10, SP
MOV R1, SP
SUB R1, 5
MOV R1, [R1]
MOV R2, SP
SUB R2, 4
MOV R2, [R2]
MOV R3, SP
SUB R3, 3
MOV R3, [R3]
MOV R4, SP
SUB R4, 2
MOV R4, [R4]
MOV R5, SP
SUB R5, 1
MOV R5, [R5]
MOV R11, "Write"
EQ R11, R1
JNZ R11, 68
MOV R11, "Read"
EQ R11, R1
JNZ R11, 100
MOV R11, "Exit"
EQ R11, R1
JNZ R11, 132
MOV R11, "Heapset"
EQ R11, R1
JNZ R11, 164
MOV R11, "Alloc"
EQ R11, R1
JNZ R11, 194
MOV R11, "Free"
EQ R11, R1
JNZ R11, 224
MOV R11, 5
PUSH R11
PUSH R2
PUSH R3
PUSH R4
PUSH R5
INT 7
POP R5
POP R4
POP R3
POP R2
POP R11
MOV R11, R10
SUB R11, 1
MOV [R11], R5
JMP 242
MOV R11, 7
PUSH R11
PUSH R2
PUSH R3
PUSH R4
PUSH R5
INT 6
POP R5
POP R4
POP R3
POP R2
POP R11
MOV R11, R10
SUB R11, 1
MOV [R11], R5
JMP 242
MOV R11, 10
PUSH R11
PUSH R2
PUSH R3
PUSH R4
PUSH R5
INT 10
POP R5
POP R4
POP R3
POP R2
POP R11
MOV R11, R10
SUB R11, 1
MOV [R11], R5
JMP 242
MOV R11, 1024
MOV R12, 1032
MOV R13, 2040
EQ R13, R11
JNZ R13, 182
MOV [R11], R12
ADD R11, 8
ADD R12, 8
JMP 168
MOV [R11], -1
MOV R11, R10
SUB R11, 1
MOV R12, 0
MOV [R11], R12 
JMP 242
MOV R11, [1024]
MOV R12, -1
EQ R12, R11
JNZ R12, 214
MOV R12, [R11]
MOV [1024], R12
MOV R12, R10
SUB R12, 1
MOV [R12], R11
JMP 242
MOV R11, R10
SUB R11, 1
MOV R12, -1
MOV [R11], R12
JMP 242
MOV R11, R2
MOV R12, [1024]
MOV [R11], R12
MOV [1024], R11
MOV R11, R10
SUB R11, 1
MOV R12, 0
MOV [R11], 0
JMP 242
RET